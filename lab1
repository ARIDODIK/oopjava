import java.util.ArrayList;
import java.util.List;

/* =========================
   CATEGORY CLASS
   ========================= */
class Category {
    private int id;
    private String name;
    private String description;
    private List<Product> products;

    public Category(int id, String name, String description) {
        this.id = id;
        this.name = name;
        this.description = description;
        this.products = new ArrayList<>();
    }

    public void addProduct(Product product) {
        if (product != null && !products.contains(product)) {
            products.add(product);
        }
    }

    public void removeProduct(Product product) {
        products.remove(product);
    }

    public double getTotalValue() {
        double total = 0;
        for (Product p : products) {
            total += p.calculateTotalValue();
        }
        return total;
    }

    public void displayCategoryInfo() {
        System.out.println("===== Category Info =====");
        System.out.println("ID: " + id);
        System.out.println("Name: " + name);
        System.out.println("Description: " + description);
        System.out.println("Products:");

        for (Product p : products) {
            p.displayProductInfo();
            System.out.println("----------------------");
        }

        System.out.println("Total category value: $" + getTotalValue());
    }
}

/* =========================
   PRODUCT CLASS
   ========================= */
class Product {
    private int id;
    private String name;
    private String description;
    private double price;
    private int quantity;
    private Category category;

    public Product() {
        this(0, "Unknown", "No description", 0.0, 0, null);
    }

    public Product(int id, String name, String description,
                   double price, int quantity, Category category) {

        this.id = id;
        this.name = name;
        this.description = description;

        setPrice(price);
        setQuantity(quantity);

        this.category = category;
        if (category != null) {
            category.addProduct(this);
        }
    }

    /* ===== Validation ===== */
    public void setPrice(double price) {
        if (price < 0) {
            throw new IllegalArgumentException("Price cannot be negative");
        }
        this.price = price;
    }

    public void setQuantity(int quantity) {
        if (quantity < 0) {
            throw new IllegalArgumentException("Quantity cannot be negative");
        }
        this.quantity = quantity;
    }

    /* ===== Inventory ===== */
    public void addStock(int amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("Stock amount must be positive");
        }
        quantity += amount;
    }

    public void sellProduct(int amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("Sell amount must be positive");
        }
        if (amount > quantity) {
            throw new IllegalArgumentException("Not enough stock");
        }
        quantity -= amount;
    }

    /* ===== Business Logic ===== */
    public void applyDiscount(double percent) {
        if (percent < 0 || percent > 100) {
            throw new IllegalArgumentException("Discount must be between 0 and 100");
        }
        price -= price * percent / 100;
    }

    public double calculateTotalValue() {
        return price * quantity;
    }

    public boolean isInStock() {
        return quantity > 0;
    }

    /* ===== Display ===== */
    public void displayProductInfo() {
        System.out.println("Product ID: " + id);
        System.out.println("Name: " + name);
        System.out.println("Description: " + description);
        System.out.println("Price: $" + price);
        System.out.println("Quantity: " + quantity);
        System.out.println("In stock: " + (isInStock() ? "Yes" : "No"));
        System.out.println("Total value: $" + calculateTotalValue());
    }
}

/* =========================
   DEMO / MAIN CLASS
   ========================= */
public class Main {
    public static void main(String[] args) {

        Category electronics = new Category(
                1,
                "Electronics",
                "Electronic devices and gadgets"
        );

        Product phone = new Product(
                101,
                "Smartphone",
                "Android smartphone",
                500,
                10,
                electronics
        );

        Product laptop = new Product(
                102,
                "Laptop",
                "Gaming laptop",
                1200,
                5,
                electronics
        );

        phone.sellProduct(2);
        laptop.applyDiscount(10);
        phone.addStock(5);

        electronics.displayCategoryInfo();
    }
}
